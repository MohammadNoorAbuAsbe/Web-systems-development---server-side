<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>

    <script src="scripts/ajaxCalls.js"></script>

    <script>

        $(document).ready(init);

        function init() {
            port = 7274
            url = `https://localhost:${port}/api/Players`;
            $("#sendBTN").click(sendToServer)
            readAllPlayers();

        }

        function readAllPlayers() {

            ajaxCall("GET", url, "", readSCB, readECB)

        }


        function readSCB(res) {
            console.log(res);
        }

        function readECB(err) {
            console.log(err);
        }


        function sendToServer() {

            // collect data from the controls

            const player = {
                Name: $("#nameTB").val(),
                Age: $("#ageTB").val(),
                WinRate: $("#winTB").val()
            }

            console.log(player);


            ajaxCall("POST", url, JSON.stringify(player), insertSCB, insertECB)



            // send the data to the server

        }

        function insertSCB(res) {
            console.log(res);
        }

        function insertECB(err) {
            console.log(err);
        }


        //'https://localhost:7274/api/Players
        
    </script>
</head>


<body>

    <table>
        <tr>
            <td>name</td>
            <td>
                <input type="text" id="nameTB" />
            </td>
        </tr>
        <tr>
            <td>age</td>
            <td>
                <input type="number" id="ageTB" />
            </td>
        </tr>
        <tr>
            <td>win rate</td>
            <td>
                <input type="number" id="winTB" />
            </td>
        </tr>
        <tr>
            
            <td>
                <button id="sendBTN">Send to Server </button>
            </td>
        </tr>
    </table>


</body>
</html>